



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="A memory leak detection library for Android">
      
      
      
        <meta name="author" content="Square, Inc.">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../images/logo.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.5.0">
    
    
      
        <title>Change Log - LeakCanary</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#ff7043">
      
    
    
      <script src="../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-142834539-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="deep-orange" data-md-color-accent="deep-purple">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#change-log" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="LeakCanary" class="md-header-nav__button md-logo">
          
            <img src="../images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              LeakCanary
            </span>
            <span class="md-header-nav__topic">
              
                Change Log
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/square/leakcanary/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    LeakCanary
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." class="md-tabs__link md-tabs__link--active">
        Overview
      </a>
    
  </li>

      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../fundamentals/" class="md-tabs__link">
          Fundamentals
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../recipes/" class="md-tabs__link">
          Help & Community
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../shark/" class="md-tabs__link">
          Shark
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../api/leakcanary-android-core/leakcanary/" class="md-tabs__link">
          LeakCanary API
        </a>
      
    </li>
  

      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="LeakCanary" class="md-nav__button md-logo">
      
        <img src="../images/logo.png" width="48" height="48">
      
    </a>
    LeakCanary
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/square/leakcanary/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    LeakCanary
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../getting_started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Fundamentals
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Fundamentals
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../fundamentals/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fundamentals-how-leakcanary-works/" title="How LeakCanary works" class="md-nav__link">
      How LeakCanary works
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fundamentals-fixing-a-memory-leak/" title="Fixing a memory leak" class="md-nav__link">
      Fixing a memory leak
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Help & Community
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Help & Community
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../recipes/" title="Code recipes" class="md-nav__link">
      Code recipes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../support/" title="Support" class="md-nav__link">
      Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upgrading-to-leakcanary-2.0/" title="Upgrading to LeakCanary 2" class="md-nav__link">
      Upgrading to LeakCanary 2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../recorded-presentations/" title="Recorded Presentations" class="md-nav__link">
      Recorded Presentations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../blog-articles/" title="Blog Articles" class="md-nav__link">
      Blog Articles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://stackoverflow.com/questions/tagged/leakcanary?sort=active" title="Stack Overflow ⏏" class="md-nav__link">
      Stack Overflow ⏏
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-8" type="checkbox" id="nav-4-8">
    
    <label class="md-nav__link" for="nav-4-8">
      Contributing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-8">
        Contributing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../how_to_help/" title="How to help" class="md-nav__link">
      How to help
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../code_of_conduct/" title="Code of Conduct" class="md-nav__link">
      Code of Conduct
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dev-env/" title="Dev Environment" class="md-nav__link">
      Dev Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releasing/" title="Releasing" class="md-nav__link">
      Releasing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Shark
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Shark
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../shark/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Shark API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Shark API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../api/shark/shark/" title="Shark" class="md-nav__link">
      Shark
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/shark-android/shark/" title="Extension: Shark Android" class="md-nav__link">
      Extension: Shark Android
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/shark-graph/shark/" title="Core: Graph" class="md-nav__link">
      Core: Graph
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/shark-hprof/shark/" title="Core: Hprof" class="md-nav__link">
      Core: Hprof
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/shark-log/shark/" title="Core: Logs" class="md-nav__link">
      Core: Logs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      LeakCanary API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        LeakCanary API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../api/leakcanary-android-core/leakcanary/" title="LeakCanary" class="md-nav__link">
      LeakCanary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/leakcanary-object-watcher-android/leakcanary/" title="ObjectWatcher Android" class="md-nav__link">
      ObjectWatcher Android
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/leakcanary-android-instrumentation/leakcanary/" title="Extension: Instrumentation tests" class="md-nav__link">
      Extension: Instrumentation tests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/leakcanary-android-process/leakcanary/" title="Extension: Separate process" class="md-nav__link">
      Extension: Separate process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/leakcanary-object-watcher/leakcanary/" title="Core: ObjectWatcher" class="md-nav__link">
      Core: ObjectWatcher
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Change Log
      </label>
    
    <a href="./" title="Change Log" class="md-nav__link md-nav__link--active">
      Change Log
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#version-21-2019-12-31" class="md-nav__link">
    Version 2.1 (2019-12-31)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-gradle-plugin-for-obfuscated-apps" class="md-nav__link">
    A Gradle plugin for obfuscated apps
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ui-twix-tweaks" class="md-nav__link">
    UI twix tweaks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documentation-goodies" class="md-nav__link">
    Documentation goodies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-breaking-bettering-changes" class="md-nav__link">
    API breaking bettering changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interactive-cli" class="md-nav__link">
    Interactive CLI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20-2019-11-27" class="md-nav__link">
    Version 2.0 (2019-11-27)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#should-i-upgrade" class="md-nav__link">
    Should I upgrade?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#so-whats-changed-since-163" class="md-nav__link">
    So, what's changed since 1.6.3?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#random-facts" class="md-nav__link">
    Random facts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changes-since-20-beta-5" class="md-nav__link">
    Changes since 2.0 Beta 5
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20-beta-5-2019-11-25" class="md-nav__link">
    Version 2.0 Beta 5 (2019-11-25)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20-beta-4-2019-11-18" class="md-nav__link">
    Version 2.0 Beta 4 (2019-11-18)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20-beta-3-2019-08-22" class="md-nav__link">
    Version 2.0 Beta 3 (2019-08-22)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20-beta-2-2019-08-02" class="md-nav__link">
    Version 2.0 Beta 2 (2019-08-02)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20-beta-1-2019-07-30" class="md-nav__link">
    Version 2.0 Beta 1 (2019-07-30)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20-alpha-3-2019-07-04" class="md-nav__link">
    Version 2.0 Alpha 3 (2019-07-04)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20-alpha-2-2019-05-21" class="md-nav__link">
    Version 2.0 Alpha 2 (2019-05-21)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20-alpha-1-2019-04-23" class="md-nav__link">
    Version 2.0 Alpha 1 (2019-04-23)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-163-2019-01-10" class="md-nav__link">
    Version 1.6.3 (2019-01-10)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-162-2018-10-16" class="md-nav__link">
    Version 1.6.2 (2018-10-16)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#public-api-changes" class="md-nav__link">
    Public API changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-161-2018-06-21" class="md-nav__link">
    Version 1.6.1 (2018-06-21)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#public-api-changes_1" class="md-nav__link">
    Public API changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-154-2017-09-22" class="md-nav__link">
    Version 1.5.4 (2017-09-22)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-153-2017-09-17" class="md-nav__link">
    Version 1.5.3 (2017-09-17)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-152-2017-08-09" class="md-nav__link">
    Version 1.5.2 (2017-08-09)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-151-2017-04-25" class="md-nav__link">
    Version 1.5.1 (2017-04-25)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-15-2016-09-28" class="md-nav__link">
    Version 1.5 (2016-09-28)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#public-api-changes_2" class="md-nav__link">
    Public API changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-14-2016-09-11" class="md-nav__link">
    Version 1.4 (2016-09-11)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-14-beta2-2016-03-23" class="md-nav__link">
    Version 1.4-beta2 (2016-03-23)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-14-beta1-2016-01-08" class="md-nav__link">
    Version 1.4-beta1 (2016-01-08)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#public-api-changes_3" class="md-nav__link">
    Public API changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-131-2015-05-16" class="md-nav__link">
    Version 1.3.1 (2015-05-16)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#public-api-changes_4" class="md-nav__link">
    Public API changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-13-2015-05-08" class="md-nav__link">
    Version 1.3 (2015-05-08)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    Dependencies
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#version-21-2019-12-31" class="md-nav__link">
    Version 2.1 (2019-12-31)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-gradle-plugin-for-obfuscated-apps" class="md-nav__link">
    A Gradle plugin for obfuscated apps
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ui-twix-tweaks" class="md-nav__link">
    UI twix tweaks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#documentation-goodies" class="md-nav__link">
    Documentation goodies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-breaking-bettering-changes" class="md-nav__link">
    API breaking bettering changes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interactive-cli" class="md-nav__link">
    Interactive CLI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20-2019-11-27" class="md-nav__link">
    Version 2.0 (2019-11-27)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#should-i-upgrade" class="md-nav__link">
    Should I upgrade?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#so-whats-changed-since-163" class="md-nav__link">
    So, what's changed since 1.6.3?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#random-facts" class="md-nav__link">
    Random facts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changes-since-20-beta-5" class="md-nav__link">
    Changes since 2.0 Beta 5
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20-beta-5-2019-11-25" class="md-nav__link">
    Version 2.0 Beta 5 (2019-11-25)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20-beta-4-2019-11-18" class="md-nav__link">
    Version 2.0 Beta 4 (2019-11-18)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20-beta-3-2019-08-22" class="md-nav__link">
    Version 2.0 Beta 3 (2019-08-22)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20-beta-2-2019-08-02" class="md-nav__link">
    Version 2.0 Beta 2 (2019-08-02)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20-beta-1-2019-07-30" class="md-nav__link">
    Version 2.0 Beta 1 (2019-07-30)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20-alpha-3-2019-07-04" class="md-nav__link">
    Version 2.0 Alpha 3 (2019-07-04)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20-alpha-2-2019-05-21" class="md-nav__link">
    Version 2.0 Alpha 2 (2019-05-21)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-20-alpha-1-2019-04-23" class="md-nav__link">
    Version 2.0 Alpha 1 (2019-04-23)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-163-2019-01-10" class="md-nav__link">
    Version 1.6.3 (2019-01-10)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-162-2018-10-16" class="md-nav__link">
    Version 1.6.2 (2018-10-16)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#public-api-changes" class="md-nav__link">
    Public API changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-161-2018-06-21" class="md-nav__link">
    Version 1.6.1 (2018-06-21)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#public-api-changes_1" class="md-nav__link">
    Public API changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-154-2017-09-22" class="md-nav__link">
    Version 1.5.4 (2017-09-22)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-153-2017-09-17" class="md-nav__link">
    Version 1.5.3 (2017-09-17)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-152-2017-08-09" class="md-nav__link">
    Version 1.5.2 (2017-08-09)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-151-2017-04-25" class="md-nav__link">
    Version 1.5.1 (2017-04-25)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-15-2016-09-28" class="md-nav__link">
    Version 1.5 (2016-09-28)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#public-api-changes_2" class="md-nav__link">
    Public API changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-14-2016-09-11" class="md-nav__link">
    Version 1.4 (2016-09-11)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-14-beta2-2016-03-23" class="md-nav__link">
    Version 1.4-beta2 (2016-03-23)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-14-beta1-2016-01-08" class="md-nav__link">
    Version 1.4-beta1 (2016-01-08)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#public-api-changes_3" class="md-nav__link">
    Public API changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-131-2015-05-16" class="md-nav__link">
    Version 1.3.1 (2015-05-16)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#public-api-changes_4" class="md-nav__link">
    Public API changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#version-13-2015-05-08" class="md-nav__link">
    Version 1.3 (2015-05-08)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dependencies" class="md-nav__link">
    Dependencies
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
				  
				<span style="float: right">🤔 Documentation issue? <a href="https://github.com/square/leakcanary/issues/new?assignees=&labels=type%3A+documentation&template=4-doc.md&title=Doc%20issue%20with%20changelog/%20page">Report</a> or <a href="https://github.com/square/leakcanary/edit/master/docs/changelog.md">edit</a></span>
                  
                
                
                <h1 id="change-log">Change Log<a class="headerlink" href="#change-log" title="Permanent link">&para;</a></h1>
<h2 id="version-21-2019-12-31">Version 2.1 (2019-12-31)<a class="headerlink" href="#version-21-2019-12-31" title="Permanent link">&para;</a></h2>
<p>A special New Year&rsquo;s Eve release 🥳, the next release will be in another decade 😎!</p>
<p>Many thanks to
<a href="https://github.com/adamfit">@adamfit</a>,
<a href="https://github.com/alexander-smityuk">@alexander-smityuk</a>,
<a href="https://github.com/Armaxis">@Armaxis</a>,
<a href="https://github.com/BraisGabin">@BraisGabin</a>,
<a href="https://github.com/devism">@devism</a>,
<a href="https://github.com/ditclear">@ditclear</a>,
<a href="https://github.com/mzgreen">@mzgreen</a>,
<a href="https://github.com/jrodbx">@jrodbx</a>,
<a href="https://github.com/jstefanowski">@jstefanowski</a>,
<a href="https://github.com/Maragues">@Maragues</a>,
<a href="https://github.com/pyricau">@pyricau</a>
for the contributions, bug reports and feature requests.</p>
<h3 id="a-gradle-plugin-for-obfuscated-apps">A Gradle plugin for obfuscated apps<a class="headerlink" href="#a-gradle-plugin-for-obfuscated-apps" title="Permanent link">&para;</a></h3>
<p>It&rsquo;s fairly common for teams to have a QA build that is tested before making the release build. Usually that build will be obfuscated (via Proguard or R8), but also add LeakCanary to detect leaks during QA. This leads to obfuscated leak traces, which are hard to understand 🤯. Check out our new <a href="../recipes/#using-leakcanary-with-obfuscated-apps">Gradle deobfuscation plugin</a> and rejoice!</p>
<h3 id="ui-twix-tweaks">UI <strike>twix</strike> tweaks<a class="headerlink" href="#ui-twix-tweaks" title="Permanent link">&para;</a></h3>
<p>In 2.0 we changed the LeakCanary UI and UX, and built a foundation on which 2.1 extends.</p>
<p><img alt="ui" src="../images/screenshot-2.0.png" /></p>
<ul>
<li>Since 2.0, Leaks are grouped by their distinct signature. In 2.1 there&rsquo;s a <code>New</code> tag that will show until you open up a leak. There&rsquo;s also a <code>Library Leak</code> tag for leaks that are known to be caused by a bug in the Android Framework or Google libraries, and the library leak description now shows up in the UI.</li>
<li>The type of the Java objects (class, instance, array) is now displayed in the LeakTrace, e.g. see <code>FontsContract class</code> and <code>ExampleApplication instance</code> above.</li>
<li>The type of the GC root now shows up at the root of the leak trace. Makes sense!</li>
<li>The leak result notification has an importance now set to MAX so that it&rsquo;ll show up right in your face. If you turn it off, the canary will haunt you in your dreams 🐤👻. To save your sanity and your device battery, automatic heap dumps now won&rsquo;t happen more often than once per minute.</li>
<li>The resource id name for <code>View</code> instances is now displayed in the leak trace. You shouldn&rsquo;t look at the <a href="https://github.com/square/leakcanary/pull/1663">implementation</a>.</li>
</ul>
<div class="codehilite"><pre><span></span>├─ android.widget.TextView instance
│    View.mID = R.id.helper_text
</pre></div>

<h3 id="documentation-goodies">Documentation goodies<a class="headerlink" href="#documentation-goodies" title="Permanent link">&para;</a></h3>
<ul>
<li>The <a href="../fundamentals/">Fundamentals</a> page was entirely rewritten, split into 3 pages and moved to its own tab. Please read it and provide feedback!</li>
<li>At Square, we have been uploading leaks to Bugsnag for 3 years now, so that no leak ever gets missed. Follow <a href="../recipes/#uploading-to-bugsnag">this recipe</a>!</li>
<li>Did you know you can <a href="../recipes/#detecting-leaks-in-jvm-applications">run LeakCanary in a JVM</a>?</li>
</ul>
<h3 id="api-breaking-bettering-changes">API <strike>breaking</strike> bettering changes<a class="headerlink" href="#api-breaking-bettering-changes" title="Permanent link">&para;</a></h3>
<ul>
<li>The APIs of the <code>Leak</code> and <code>LeakTrace</code> classes have significantly changed, e.g. all <code>LeakTrace</code> instances with an identical signature are grouped under the same Leak object. Despite these breaking changes, this release version is a minor update. Oh noes, what about semantic versioning 😱? Ask Don Quixote.</li>
<li>You can now customize the way LeakCanary finds the leaking objects in the heap dump. For example, here&rsquo;s the configuration SharkCli uses to find leaks in heap dumps of apps that don&rsquo;t even have the LeakCanary dependency:</li>
</ul>
<div class="codehilite"><pre><span></span><span class="n">LeakCanary</span><span class="p">.</span><span class="n">config</span> <span class="p">=</span> <span class="n">LeakCanary</span><span class="p">.</span><span class="n">config</span><span class="p">.</span><span class="n">copy</span><span class="p">(</span>
    <span class="n">leakingObjectFinder</span> <span class="p">=</span> <span class="n">FilteringLeakingObjectFinder</span><span class="p">(</span>
        <span class="n">AndroidObjectInspectors</span><span class="p">.</span><span class="n">appLeakingObjectFilters</span>
    <span class="p">)</span>
<span class="p">)</span>
</pre></div>

<ul>
<li>LeakCanary automatically disables itself in tests by detecting that the <code>org.junit.Test</code> is in the classpath. Unfortunately, some apps ship Junit in their app debug classpath (e.g. when using OkHttp MockWebServer). You can now customize which class is used to detect tests:</li>
</ul>
<div class="codehilite"><pre><span></span><span class="nt">&lt;resources&gt;</span>
  <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">&quot;leak_canary_test_class_name&quot;</span><span class="nt">&gt;</span>assertk.Assert<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/resources&gt;</span>
</pre></div>

<h3 id="interactive-cli">Interactive CLI<a class="headerlink" href="#interactive-cli" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/square/leakcanary/releases/download/v2.1/shark-cli-2.1.zip">Shark CLI</a> was rewritten on top of <a href="https://github.com/ajalt/clikt">Clikt</a>:</p>
<div class="codehilite"><pre><span></span>$ shark-cli
Usage: shark-cli <span class="o">[</span>OPTIONS<span class="o">]</span> COMMAND <span class="o">[</span>ARGS<span class="o">]</span>...

                 ^<span class="sb">`</span>.                 .<span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">=</span>.
 ^_              <span class="se">\ </span> <span class="se">\ </span>              / _  _ <span class="se">\</span>
 <span class="se">\ \ </span>            <span class="o">{</span>   <span class="se">\ </span>            <span class="p">|</span>  d  b  <span class="p">|</span>
 <span class="o">{</span>  <span class="se">\ </span>          /     <span class="sb">`</span>~~~--__     <span class="se">\ </span>  /<span class="se">\ </span>  /
 <span class="o">{</span>   <span class="se">\_</span>__----~~<span class="s1">&#39;              `~~-_/&#39;</span>-<span class="o">=</span><span class="se">\/</span><span class="o">=</span>-<span class="s1">&#39;\,</span>
<span class="s1">  \                         /// a  `~.      \ \</span>
<span class="s1">  / /~~~~-, ,__.    ,      ///  __,,,,)      \ |</span>
<span class="s1">  \/      \/    `~~~;   ,---~~-_`/ \        / \/</span>
<span class="s1">                   /   /            &#39;</span>.    .<span class="s1">&#39;</span>
<span class="s1">                  &#39;</span>._.<span class="err">&#39;</span>             _<span class="p">|</span><span class="sb">`</span>~~<span class="sb">`</span><span class="p">|</span>_
                                    /<span class="p">|</span><span class="se">\ </span> /<span class="p">|</span><span class="se">\</span>

Options:
  -p, --process NAME              Full or partial name of a process, e.g.
                                  <span class="s2">&quot;example&quot;</span> would match <span class="s2">&quot;com.example.app&quot;</span>
  -d, --device ID                 device/emulator id
  -m, --obfuscation-mapping PATH  path to obfuscation mapping file
  --verbose / --no-verbose        provide additional details as to what
                                  shark-cli is doing
  -h, --hprof FILE                path to a .hprof file
  --help                          Show this message and <span class="nb">exit</span>

Commands:
  interactive   Explore a heap dump.
  analyze       Analyze a heap dump.
  dump-process  Dump the heap and pull the hprof file.
  strip-hprof   Replace all primitive arrays from the provided heap dump with
                arrays of zeroes and generate a new <span class="s2">&quot;-stripped.hprof&quot;</span> file.
</pre></div>

<p>There&rsquo;s a new <code>interactive</code> command which enables exploring the heap dump from the command line:</p>
<div class="codehilite"><pre><span></span>$ shark-cli -h heapdump.hprof interactive
Enter <span class="nb">command</span> <span class="o">[</span>help<span class="o">]</span>:
<span class="nb">help</span>

Available commands:
  analyze                   Analyze the heap dump.
  class NAME@ID             Show class with a matching NAME and Object ID.
  instance CLASS_NAME@ID    Show instance with a matching CLASS_NAME and Object
ID.
  array CLASS_NAME@ID       Show array instance with a matching CLASS_NAME and
Object ID.
  -&gt;instance CLASS_NAME@ID  Show path from GC Roots to instance.
  ~&gt;instance CLASS_NAME@ID  Show path from GC Roots to instance, highlighting
suspect references.
  <span class="nb">help</span>                      Show this message.
  <span class="nb">exit</span>                      Exit this interactive prompt.
</pre></div>

<p>We&rsquo;re currently exploring the idea of adding <a href="https://twitter.com/Piwai/status/1211795647273160704">support for SQL queries</a>, feedback welcome!</p>
<p>For more details, see the <a href="https://github.com/square/leakcanary/milestone/15">2.1 Milestone</a> and the <a href="https://github.com/square/leakcanary/compare/v2.0...v2.1">full diff</a>.</p>
<h2 id="version-20-2019-11-27">Version 2.0 (2019-11-27)<a class="headerlink" href="#version-20-2019-11-27" title="Permanent link">&para;</a></h2>
<p>In the past 7 months, LeakCanary went through 3 alphas and 5 betas, encompassing 23 contributors over 493 commits, 35826 insertions and 10156 deletions.</p>
<h3 id="should-i-upgrade">Should I upgrade?<a class="headerlink" href="#should-i-upgrade" title="Permanent link">&para;</a></h3>
<p><strong>YES!</strong> LeakCanary 2 is so much better, it might make you excited when you see a new memory leak. Follow the <a href="../upgrading-to-leakcanary-2.0/">upgrade guide</a>, you won&rsquo;t regret it!</p>
<h3 id="so-whats-changed-since-163">So, what&rsquo;s changed since 1.6.3?<a class="headerlink" href="#so-whats-changed-since-163" title="Permanent link">&para;</a></h3>
<p><strong>Everything.</strong> The LeakCanary codebase went from <strong>~6000</strong> lines of Java to <strong>~16000</strong> lines of Kotlin, excluding comments &amp; blanks.</p>
<div class="admonition question">
<p class="admonition-title">Isn&rsquo;t Kotlin supposed to drastically reduce the amount of boilerplate code?</p>
<p>Absolutely! And it did. But then, we wrote more code.
LeakCanary used to depend on <a href="https://github.com/square/haha">HAHA</a>, a repackaging of <a href="https://android.googlesource.com/platform/tools/base/+/2f03004c181baf9d291a9bf992e1b444e83cd82d/perflib/">perflib</a>, the heap dump parser used by Android Studio. Unfortunately perflib was slow and used too much memory, so LeakCanary now includes its own heap dump parser: <a href="../shark/">Shark</a>. The extra code comes from Shark, but also from having a lot more automated tests, and an improved UI layer.</p>
</div>
<p>One major difference: when the app is in foreground, LeakCanary 2 will not trigger on every retained instance. Instead it will wait until the app goes in background or to reach a threashold of 5 retained instances in foreground. The analysis will then find all the leaks at once, and group identical leaks in the results UI. Please read the <a href="../fundamentals/">Fundamentals</a> section to learn more!</p>
<h3 id="random-facts">Random facts<a class="headerlink" href="#random-facts" title="Permanent link">&para;</a></h3>
<ul>
<li>You can customize the Leaks launcher icon and label: <a href="../recipes/#icon-and-label">learn more here</a>.</li>
<li>If you long press on your main activity launcher icon, you should see a LeakCanary dynamic shortcut. You can then long press that to drop it on your home screen, and the launcher shows that it&rsquo;s the leaks launcher for your app.</li>
<li>Out of the box, LeakCanary tracks all fragments flavors: AOSP, Support Library and Android X.</li>
<li>From within the leak screen, you can share a leak to stack overflow. You can also share a heap dump, or import and analyze a heap dump from another device.</li>
<li>You can run LeakCanary from your computer command line, on any debuggable app even if that app doesn&rsquo;t have LeakCanary: <a href="../shark/##shark-cli">learn more here</a>.</li>
<li>The new documentation is fully searchable and includes the API documentation. Try the search bar ⤴.</li>
<li>A large 160Mb heap dump uses 2Gb memory when opening it in Android Studio, but only 40Mb with Shark.</li>
</ul>
<h3 id="changes-since-20-beta-5">Changes since 2.0 Beta 5<a class="headerlink" href="#changes-since-20-beta-5" title="Permanent link">&para;</a></h3>
<ul>
<li>Shark CLI supports multiple connected devices <a href="https://github.com/square/leakcanary/issues/1642">#1642</a></li>
<li>Fixed missing sources from Maven Central <a href="https://github.com/square/leakcanary/issues/1643">#1643</a></li>
<li>Updated notification icon to avoid confusion with Twitter DM notifications, and added icons to bottom navigation bar <a href="https://github.com/square/leakcanary/pull/1648">#1648</a></li>
<li>Automatic leak detection for support library fragments <a href="https://github.com/square/leakcanary/pull/1611">#1611</a></li>
</ul>
<p>Many thanks to
<a href="https://github.com/AndreasBoehm">@AndreasBoehm</a>,
<a href="https://github.com/jrodbx">@jrodbx</a>,
<a href="https://github.com/pyricau">@pyricau</a>
for the contributions, bug reports and feature requests.</p>
<p>For more details, see the <a href="https://github.com/square/leakcanary/milestone/14">2.0 Milestone</a> and the <a href="https://github.com/square/leakcanary/compare/v2.0-beta-5...v2.0">full diff</a>.</p>
<h2 id="version-20-beta-5-2019-11-25">Version 2.0 Beta 5 (2019-11-25)<a class="headerlink" href="#version-20-beta-5-2019-11-25" title="Permanent link">&para;</a></h2>
<ul>
<li>Major bugfix: native gc roots were accidentally ignored in Beta 4, as a result some leaks were not found <a href="https://github.com/square/leakcanary/issues/1634">#1634</a></li>
<li>Fixed Lint warning (<code>leak_canary_about_message</code> string triggered <em>multiple substitutions</em> warning) <a href="https://github.com/square/leakcanary/issues/1630">#1630</a></li>
</ul>
<p>Many thanks to
<a href="https://github.com/DanEdgarTarget">@DanEdgarTarget</a>,
<a href="https://github.com/msfjarvis">@msfjarvis</a>,
<a href="https://github.com/pyricau">@PaulWoitaschek</a>,
<a href="https://github.com/pyricau">@pyricau</a>,
<a href="https://github.com/ZacSweers">@ZacSweers</a>
for the contributions, bug reports and feature requests.</p>
<p>For more details, see the <a href="https://github.com/square/leakcanary/milestone/13">2.0-beta-5 Milestone</a> and the <a href="https://github.com/square/leakcanary/compare/v2.0-beta-4...v2.0-beta-5">full diff</a>.</p>
<h2 id="version-20-beta-4-2019-11-18">Version 2.0 Beta 4 (2019-11-18)<a class="headerlink" href="#version-20-beta-4-2019-11-18" title="Permanent link">&para;</a></h2>
<ul>
<li>Improved string rendering for heap analysis results</li>
<li>UX redesign <a href="https://github.com/square/leakcanary/issues/1445">#1445</a></li>
<li>Support for pattern matching of native reference leaks <a href="https://github.com/square/leakcanary/issues/1562">#1562</a></li>
<li>Added support for deobfuscation using Proguard mapping files in Shark <a href="https://github.com/square/leakcanary/issues/1499">#1499</a>. This isn&rsquo;t directly supported in LeakCanary yet.</li>
<li>Added support for extracting metadata from the heap dump (see the <a href="../recipes/#extracting-metadata-from-the-heap-dump">recipe</a>) <a href="https://github.com/square/leakcanary/issues/1519">#1519</a></li>
<li>Improved auto disabling of LeakCanary in Unit and UI tests <a href="https://github.com/square/leakcanary/issues/1552">#1552</a></li>
<li>Several performance improvements when parsing heap dumps</li>
<li>Fixed several bugs and crashes</li>
<li>Added new known leak patterns</li>
</ul>
<p>Many thanks to
<a href="https://github.com/Armaxis">@Armaxis</a>,
<a href="https://github.com/BraisGabin">@BraisGabin</a>,
<a href="https://github.com/bric3">@bric3</a>,
<a href="https://github.com/elihart">@elihart</a>,
<a href="https://github.com/fernandospr">@fernandospr</a>,
<a href="https://github.com/flickator">@flickator</a>,
<a href="https://github.com/gabrysgab">@gabrysgab</a>,
<a href="https://github.com/JorgeDLS">@JorgeDLS</a>,
<a href="https://github.com/lannyf77">@lannyf77</a>,
<a href="https://github.com/msfjarvis">@msfjarvis</a>,
<a href="https://github.com/mzgreen">@mzgreen</a>,
<a href="https://github.com/ozmium">@ozmium</a>,
<a href="https://github.com/pyricau">@PaulWoitaschek</a>,
<a href="https://github.com/pyricau">@pyricau</a>,
<a href="https://github.com/shelpy">@shelpy</a>,
<a href="https://github.com/vRallev">@vRallev</a>,
<a href="https://github.com/ZacSweers">@ZacSweers</a>
for the contributions, bug reports and feature requests.</p>
<p>For more details, see the <a href="https://github.com/square/leakcanary/milestone/12">2.0-beta-4 Milestone</a> and the <a href="https://github.com/square/leakcanary/compare/v2.0-beta-3...v2.0-beta-4">full diff</a>.</p>
<h2 id="version-20-beta-3-2019-08-22">Version 2.0 Beta 3 (2019-08-22)<a class="headerlink" href="#version-20-beta-3-2019-08-22" title="Permanent link">&para;</a></h2>
<ul>
<li>Baseline memory usage for large hprofs divided by 3 and removed memory spikes <a href="https://github.com/square/leakcanary/pull/1543">#1543</a></li>
<li>Fixed crash when LeakCanary is initialized from another process <a href="https://github.com/square/leakcanary/issues/1529">#1529</a></li>
<li>Java local references are deprioritized to look for longer alternative paths <a href="https://github.com/square/leakcanary/pull/1525">#1525</a></li>
<li>Fixed <code>JavaLocalPattern</code> not matching on Lollipop <a href="https://github.com/square/leakcanary/pull/1524">#1524</a></li>
</ul>
<p>Many thanks to
<a href="https://github.com/Armaxis">@Armaxis</a>,
<a href="https://github.com/elihart">@elihart</a>,
<a href="https://github.com/emartynov">@emartynov</a>,
<a href="https://github.com/hmcgreevy-instil">@hmcgreevy-instil</a>,
<a href="https://github.com/pyricau">@pyricau</a>
for the contributions, bug reports and feature requests.</p>
<p>For more details, see the <a href="https://github.com/square/leakcanary/milestone/11">2.0-beta-3 Milestone</a> and the <a href="https://github.com/square/leakcanary/compare/v2.0-beta-2...v2.0-beta-3">full diff</a>.</p>
<h2 id="version-20-beta-2-2019-08-02">Version 2.0 Beta 2 (2019-08-02)<a class="headerlink" href="#version-20-beta-2-2019-08-02" title="Permanent link">&para;</a></h2>
<ul>
<li>Fixed <em>Leak analysis failed: Object id not found in heap dump.</em> <a href="https://github.com/square/leakcanary/issues/1516">#1516</a></li>
<li>10x speed increase of hprof indexing on large heap dumps <a href="https://github.com/square/leakcanary/pull/1520">#1520</a></li>
</ul>
<p>Many thanks to
<a href="https://github.com/kolphi">@kolphi</a>,
<a href="https://github.com/pyricau">@pyricau</a>,
<a href="https://github.com/ZacSweers">@ZacSweers</a>
for the contributions, bug reports and feature requests.</p>
<p>For more details, see the <a href="https://github.com/square/leakcanary/milestone/10">2.0-beta-2 Milestone</a> and the <a href="https://github.com/square/leakcanary/compare/v2.0-beta-1...v2.0-beta-2">full diff</a>.</p>
<h2 id="version-20-beta-1-2019-07-30">Version 2.0 Beta 1 (2019-07-30)<a class="headerlink" href="#version-20-beta-1-2019-07-30" title="Permanent link">&para;</a></h2>
<ul>
<li>New standalone library! <a href="../shark/">Shark</a> is the heap analyzer that powers LeakCanary 2, and it can run in any Java VM. It comes with a <a href="../shark/#shark-cli">CLI</a>: you can now run <code>shark-cli analyze-process com.example.myapp</code> from your computer.</li>
<li>New Heap Explorer directly on device! Open a Heap Analysis in LeakCanary, tap the options menu and select &ldquo;Heap Explorer&rdquo;. This is still experimental and not very user friendly, contributions welcome!</li>
<li><strong>Large API rewrite</strong> to improve usability. If you used the alpha with a customized configuration, there are breaking changes. Of note: LeakSentry became <a href="/leakcanary/api/leakcanary-object-watcher-android/leakcanary/-app-watcher/">AppWatcher</a>, RefWatcher became <a href="/leakcanary/api/leakcanary-object-watcher/leakcanary/-object-watcher/">ObjectWatcher</a>, AndroidExcludedRefs became <a href="/leakcanary/api/shark-android/shark/-android-reference-matchers/">AndroidReferenceMatchers</a>, AnalysisResultListener became <a href="/leakcanary/api/leakcanary-android-core/leakcanary/-on-heap-analyzed-listener/">OnHeapAnalyzedListener</a>, AndroidLeakTraceInspectors became <a href="/leakcanary/api/shark-android/shark/-android-object-inspectors/">AndroidObjectInspectors</a>.</li>
<li>The entire API surface is now documented and the documentation is available on this website: see the <strong>LeakCanary API</strong> tab at the top.</li>
<li>Removed the <strong>dependency on Android X</strong>. No more configuration issues! <a href="https://github.com/square/leakcanary/issues/1462">#1462</a> </li>
<li>Added <strong>Proguard rules</strong> for LeakCanary and ObjectWatcher. <a href="https://github.com/square/leakcanary/pull/1500">#1500</a> </li>
<li>Display LeakCanary version in the About screen. <a href="https://github.com/square/leakcanary/issues/1448">#1448</a> </li>
<li>Bug fixes, new reference matchers and object inspectors</li>
</ul>
<p>Many thanks to
<a href="https://github.com/arctouch-carlosottoboni">@arctouch-carlosottoboni</a>,
<a href="https://github.com/jemaystermind">@jemaystermind</a>,
<a href="https://github.com/kushagrakumar27">@kushagrakumar27</a>,
<a href="https://github.com/pyricau">@pyricau</a>,
<a href="https://github.com/snkashis">@snkashis</a>
for the contributions, bug reports and feature requests.</p>
<p>For more details, see the <a href="https://github.com/square/leakcanary/milestone/9">2.0-beta-1 Milestone</a> and the <a href="https://github.com/square/leakcanary/compare/v2.0-alpha-3...v2.0-beta-1">full diff</a>.</p>
<h2 id="version-20-alpha-3-2019-07-04">Version 2.0 Alpha 3 (2019-07-04)<a class="headerlink" href="#version-20-alpha-3-2019-07-04" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://github.com/square/leakcanary/pull/1401">#1401</a> LeakCanary can now import all hprof files created from prior LeakCanary versions.</li>
<li><a href="https://github.com/square/leakcanary/pull/1414">#1414</a> New API: <code>RefWatcher.retainedInstances</code> which returns the instances that are currently considered retained.</li>
<li><a href="https://github.com/square/leakcanary/pull/1419">#1419</a> New APIs: <code>LeakCanary.Config.maxStoredHeapDumps</code> (default 7) and <code>LeakCanary.Config.requestWriteExternalStoragePermission</code> (default false). LeakCanary won&rsquo;t ask for the external storage permission anymore by default.</li>
<li><a href="https://github.com/square/leakcanary/issues/1338">#1338</a> API change: <code>LeakCanary.Config.exclusionsFactory</code> replaced with <code>LeakCanary.Config.knownReferences</code> (simpler use), <code>LeakCanary.Config.leakInspectors</code> and <code>LeakCanary.Config.labelers</code> merged into <code>LeakCanary.Config.leakTraceInspectors</code> which provides access to the entire leak trace as well as a new graph oriented API that replaces the low level hprof parser API.</li>
<li><a href="https://github.com/square/leakcanary/issues/1382">#1382</a> LeakCanary now disables automatic heap dumping when running in AndroidX UI tests.</li>
<li><a href="https://github.com/square/leakcanary/pull/1424">#1424</a> API rename: <code>RefWatcher.hasRetainedReferences</code> =&gt; <code>RefWatcher.hasRetainedInstances</code>, <code>RefWatcher.retainedReferenceCount</code> =&gt; <code>RefWatcher.retainedInstanceCount</code>, <code>RefWatcher.hasWatchedReferences</code> =&gt; <code>RefWatcher.hasWatchedInstances</code>, <code>RefWatcher.removeKeysRetainedBeforeHeapDump</code> =&gt; <code>RefWatcher.removeInstancesRetainedBeforeHeapDump</code>, <code>RefWatcher.clearWatchedReferences</code> =&gt; <code>RefWatcher.clearWatchedInstances</code>.</li>
<li><a href="https://github.com/square/leakcanary/pull/1432">#1432</a> <a href="https://github.com/square/leakcanary/pull/1438">#1438</a> <a href="https://github.com/square/leakcanary/pull/1440">#1440</a> New &ldquo;won&rsquo;t fix&rdquo; leaks and leak trace inspectors</li>
<li><a href="https://github.com/square/leakcanary/issues/1374">#1374</a> <a href="https://github.com/square/leakcanary/issues/1364">#1364</a> <a href="https://github.com/square/leakcanary/issues/1366">#1366</a> <a href="https://github.com/square/leakcanary/issues/1417">#1417</a> <a href="https://github.com/square/leakcanary/issues/#1399">#1399</a> <a href="https://github.com/square/leakcanary/issues/1416">#1416</a> <a href="https://github.com/square/leakcanary/issues/1407">#1407</a> <a href="https://github.com/square/leakcanary/issues/1427">#1427</a> <a href="https://github.com/square/leakcanary/issues/1385">#1385</a> Bug and crash fixes</li>
</ul>
<p>Many thanks to
<a href="https://github.com/1step2hell">@1step2hell</a>,
<a href="https://github.com/afollestad">@afollestad</a>,
<a href="https://github.com/ansman">@ansman</a>,
<a href="https://github.com/bjdodson">@bjdodson</a>,
<a href="https://github.com/BraisGabin">@BraisGabin</a>,
<a href="https://github.com/EBfVince">@EBfVince</a>,
<a href="https://github.com/jaredsburrows">@jaredsburrows</a>,
<a href="https://github.com/pforhan">@pforhan</a>,
<a href="https://github.com/pyricau">@pyricau</a>,
<a href="https://github.com/tellypresence">@tellypresence</a>,
<a href="https://github.com/wiyarmir">@wiyarmir</a>
for the contributions, bug reports and feature requests.</p>
<p>For more details, see the <a href="https://github.com/square/leakcanary/milestone/8">2.0-alpha-3 Milestone</a> and the <a href="https://github.com/square/leakcanary/compare/v2.0-alpha-2...v2.0-alpha-3">full diff</a>.</p>
<h2 id="version-20-alpha-2-2019-05-21">Version 2.0 Alpha 2 (2019-05-21)<a class="headerlink" href="#version-20-alpha-2-2019-05-21" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://github.com/square/leakcanary/pull/1040">#1040</a> Import and analyze hprof files from other devices</li>
<li><a href="https://github.com/square/leakcanary/pull/1344">#1344</a> Computing retained size</li>
<li><a href="https://github.com/square/leakcanary/pull/1325">#1325</a> New notification showing current count of retained instances</li>
<li><a href="https://github.com/square/leakcanary/pull/1079">#1079</a> &ldquo;Excluded&rdquo; leaks have been renamed to &ldquo;Won&rsquo;t fix&rdquo; leaks to clarify meaning.</li>
<li><a href="https://github.com/square/leakcanary/pull/1328">#1328</a> New leaks are called out in the UI. </li>
<li><a href="https://github.com/square/leakcanary/pull/1327">#1327</a> LeakSentry can be enabled / disabled and is automatically disabled in non debuggable builds.</li>
<li><a href="https://github.com/square/leakcanary/pull/1173">#1173</a> Experimental: now reporting leaks that only go through weak references (previously reported as &ldquo;no path to instance&rdquo;)</li>
<li><a href="https://github.com/square/leakcanary/pull/1339">#1339</a> Readded support for Thread name based exclusions</li>
<li><a href="https://github.com/square/leakcanary/pull/1312">#1312</a> Fixed bug causing LeakCanary to stop detecting leaks after the app is killed.</li>
<li><a href="https://github.com/square/leakcanary/pull/1310">#1310</a> <a href="https://github.com/square/leakcanary/pull/1313">#1313</a> <a href="https://github.com/square/leakcanary/pull/1314">#1314</a> <a href="https://github.com/square/leakcanary/pull/1340">#1340</a> <a href="https://github.com/square/leakcanary/pull/1337">#1337</a> Many API changes</li>
<li><a href="https://github.com/square/leakcanary/pull/1296">#1296</a> <a href="https://github.com/square/leakcanary/pull/1293">#1293</a> <a href="https://github.com/square/leakcanary/pull/1306">#1306</a> <a href="https://github.com/square/leakcanary/pull/1336">#1336</a> Fixed several crashes. </li>
</ul>
<p>Many thanks to
<a href="https://github.com/forrestbice">@forrestbice</a>,
<a href="https://github.com/Foso">@Foso</a>,
<a href="https://github.com/Goddchen">@Goddchen</a>,
<a href="https://github.com/marcosholgado">@marcosholgado</a>,
<a href="https://github.com/orionlee">@orionlee</a>,
<a href="https://github.com/pyricau">@pyricau</a>,
<a href="https://github.com/satoshun">@satoshun</a>,
<a href="https://github.com/ZacSweers">@ZacSweers</a>
for the contributions!</p>
<p>For more details, see the <a href="https://github.com/square/leakcanary/milestone/7">2.0-alpha-2 Milestone</a> and the <a href="https://github.com/square/leakcanary/compare/v2.0-alpha-1...v2.0-alpha-2">full diff</a>.</p>
<h2 id="version-20-alpha-1-2019-04-23">Version 2.0 Alpha 1 (2019-04-23)<a class="headerlink" href="#version-20-alpha-1-2019-04-23" title="Permanent link">&para;</a></h2>
<p><img alt="logo" src="../images/logo-2.0-200px.png" /></p>
<ul>
<li>New <a href="https://github.com/square/leakcanary/wiki/FAQ#who-made-the-logo">logo</a>, thanks <a href="https://github.com/flickator">@flickator</a>!</li>
<li>Entirely rewritten to <strong>100% Kotlin</strong></li>
<li>Multiple leaks detected in one analysis<ul>
<li>The heap is dumped when the app goes in the background, or when a minimum of 5 leaks is reached in the foreground.</li>
</ul>
</li>
<li>Leak grouping<ul>
<li>Leaks that share similar causes are grouped in the UI.</li>
<li>New screens to see the list of groups and each group.</li>
<li>Improved leaktrace strings to highlight leak causes.</li>
<li>Leaks can be shared to Stack Overflow</li>
</ul>
</li>
<li>New library: <strong>LeakSentry</strong>.<ul>
<li>Detects when objects are leaking and triggers LeakCanary</li>
<li>Can be used independently in production, for instance to report the number of leaking instances on an OutOfMemoryError crash.</li>
</ul>
</li>
<li>New heap parser<ul>
<li>Uses <strong>90% less memory and 6 times</strong> faster than the prior heap parser.</li>
<li>Runs in the same process as the app on a low priority thread.</li>
<li>No more dependency on Perflib and TroveJ. New dependency on Okio.</li>
<li>The old parser is still available as <code>leakcanary-android-perflib</code> but will be removed after alpha.</li>
</ul>
</li>
<li>Labelers can add any string content to leak elements</li>
<li>0 code setup, just add the one debug dependency.</li>
<li>Simpler configuration options</li>
<li>Updated from support library to Android X</li>
</ul>
<p>Many thanks to
<a href="https://github.com/BraisGabin">@BraisGabin</a>,
<a href="https://github.com/colinmarsch">@colinmarsch</a>,
<a href="https://github.com/jrodbx">@jrodbx</a>,
<a href="https://github.com/flickator">@flickator</a>,
<a href="https://github.com/JakeWharton">@JakeWharton</a>,
<a href="https://github.com/pyricau">@pyricau</a>,
<a href="https://github.com/WhatsEmo">@WhatsEmo</a>
for the contributions!</p>
<p>For more details, see the <a href="https://github.com/square/leakcanary/milestone/6">2.0-alpha-1 Milestone</a> and the <a href="https://github.com/square/leakcanary/compare/v1.6.3...v2.0-alpha-1">full diff</a>.</p>
<h2 id="version-163-2019-01-10">Version 1.6.3 (2019-01-10)<a class="headerlink" href="#version-163-2019-01-10" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://github.com/square/leakcanary/issues/1163">#1163</a> Fixed leaks being incorrectly classified as &ldquo;no leak&rdquo; due to missed GC Roots.</li>
<li><a href="https://github.com/square/leakcanary/issues/1153">#1153</a> <code>LeakCanary.isInAnalyzerProcess</code> now correctly returns true in the analyzer process prior to any first leak (could be triggered by starting the leak result activity).</li>
<li><a href="https://github.com/square/leakcanary/issues/1158">#1158</a> Stopped enabling DisplayLeakActivity when not using DisplayLeakService.</li>
<li><a href="https://github.com/square/leakcanary/issues/1135">#1135</a> Fixed IndexOutOfBoundsException for leak traces of size 1.</li>
<li><a href="https://github.com/square/leakcanary/issues/1163">#1163</a> Keep &ldquo;no leak&rdquo; heap dumps.</li>
</ul>
<p>Many thanks to
<a href="https://github.com/KMaragh">@KMaragh</a>,
<a href="https://github.com/pyricau">@pyricau</a>,
<a href="https://github.com/SebRut">@SebRut</a>
for the code contributions!</p>
<p>For more details, see the <a href="https://github.com/square/leakcanary/milestone/5">1.6.3 Milestone</a> and the <a href="https://github.com/square/leakcanary/compare/v1.6.2...v1.6.3">full diff</a>.</p>
<h2 id="version-162-2018-10-16">Version 1.6.2 (2018-10-16)<a class="headerlink" href="#version-162-2018-10-16" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://github.com/square/leakcanary/issues/1067">#1067</a> Fixed TransactionTooLargeException crash (leak analysis would never complete).</li>
<li><a href="https://github.com/square/leakcanary/pull/1061">#1061</a> Detection of Fragment view leaks after Fragment#onDestroyView().</li>
<li><a href="https://github.com/square/leakcanary/pull/1076">#1076</a> Added the FOREGROUND_SERVICE permission for Android P.</li>
<li><a href="https://github.com/square/leakcanary/issues/1062">#1062</a> The LeakCanary toast now always shows correctly. It doesn&rsquo;t show if there is no activity in foreground.</li>
<li><a href="https://github.com/square/leakcanary/issues/1115">#1115</a> Reenabled the DisplayLeakActivity icon on fresh installs.</li>
<li><a href="https://github.com/square/leakcanary/pull/1100">#1100</a> Added nullability annotations to improve Kotlin support.</li>
<li>Updates to excluded leaks (<a href="https://github.com/square/leakcanary/commits/v1.6.2/leakcanary-android/src/main/java/com/squareup/leakcanary/AndroidExcludedRefs.java">commits</a>).</li>
<li>Updates to reachability inspectors (<a href="https://github.com/square/leakcanary/commits/v1.6.2/leakcanary-android/src/main/java/com/squareup/leakcanary/AndroidReachabilityInspectors.java">commits</a>).</li>
</ul>
<p>Many thanks to
<a href="https://github.com/fractalwrench">@fractalwrench</a>,
<a href="https://github.com/ZacSweers">@ZacSweers</a>,
<a href="https://github.com/Goddchen">@Goddchen</a>,
<a href="https://github.com/igokoro">@igokoro</a>,
<a href="https://github.com/IlyaGulya">@IlyaGulya</a>,
<a href="https://github.com/JakeWharton">@JakeWharton</a>,
<a href="https://github.com/javmarina">@javmarina</a>,
<a href="https://github.com/jokermonn">@jokermonn</a>,
<a href="https://github.com/jrodbx">@jrodbx</a>,
<a href="https://github.com/Parseus">@Parseus</a>,
<a href="https://github.com/pyricau">@pyricau</a>,
<a href="https://github.com/scottkennedy">@scottkennedy</a>
for the code contributions!</p>
<h3 id="public-api-changes">Public API changes<a class="headerlink" href="#public-api-changes" title="Permanent link">&para;</a></h3>
<ul>
<li>Subclasses of <code>AbstractAnalysisResultService</code> should now override <code>onHeapAnalyzed(@NonNull AnalyzedHeap analyzedHeap)</code> instead of <code>onHeapAnalyzed(@NonNull HeapDump heapDump, @NonNull AnalysisResult result)</code></li>
</ul>
<p>For more details, see the <a href="https://github.com/square/leakcanary/milestone/4">1.6.2 Milestone</a> and the <a href="https://github.com/square/leakcanary/compare/v1.6.1...v1.6.2">full diff</a>.</p>
<h2 id="version-161-2018-06-21">Version 1.6.1 (2018-06-21)<a class="headerlink" href="#version-161-2018-06-21" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://github.com/square/leakcanary/issues/727">#727</a> Improved leak analysis: LeakCanary now identifies and highlights the potential causes of the leak.</li>
<li><a href="https://github.com/square/leakcanary/issues/1011">#1011</a> We noticed that computing the retained heap size could take a long time, so it&rsquo;s now optional and off by default.</li>
<li><a href="https://github.com/square/leakcanary/pull/633">#633</a> Support for detecting leaks in instrumentation tests (<a href="https://github.com/square/leakcanary/wiki/Customizing-LeakCanary#running-leakcanary-in-instrumentation-tests">see the wiki</a>).</li>
<li><a href="https://github.com/square/leakcanary/pull/985">#985</a> Ability to convert leak traces into stack traces for easy remote reporting (<a href="https://github.com/square/leakcanary/wiki/Customizing-LeakCanary#uploading-to-a-server">see the wiki</a>).</li>
<li><a href="https://github.com/square/leakcanary/issues/983">#983</a> Support for watching destroyed Fragments.</li>
<li><a href="https://github.com/square/leakcanary/issues/846">#846</a> LeakCanary now uses foreground services and displays a notification when the analysis is in progress. This also fixes crashes when analyzing in background on O+.</li>
<li>The LeakCanary icon (to start to DisplayLeakActivity) is now hidden by default, and only enabled after the first leak is found.</li>
<li><a href="https://github.com/square/leakcanary/issues/775">#775</a> Fixed crash when sharing heap dumps on O+ and added a dependency to the support-core-utils library.</li>
<li><a href="https://github.com/square/leakcanary/pull/930">#930</a> DisplayLeakActivity has a responsive icon.</li>
<li><a href="https://github.com/square/leakcanary/issues/685">#685</a> Stopped doing IO on main thread in DisplayLeakActivity (fixes StrictMode errors).</li>
<li><a href="https://github.com/square/leakcanary/pull/999">#999</a> Updated HAHA to 2.0.4, which uses Trove4j as an external dependency (from jcenter) instead of rebundling it. This is to clarify licences (Apache v2 vs LGPL 2.1).</li>
<li>Several bug and crash fixes.</li>
</ul>
<p>Many thanks to <a href="https://github.com/AdityaAnand1">@AdityaAnand1</a>, <a href="https://github.com/alhah">@alhah</a>, <a href="https://github.com/christxph">@christxph</a>, <a href="https://github.com/csoon03">@csoon03</a>, <a href="https://github.com/daqi">@daqi</a>, <a href="https://github.com/JakeWharton">@JakeWharton</a>, <a href="https://github.com/jankovd">@jankovd</a>, <a href="https://github.com/jrodbx">@jrodbx</a>, <a href="https://github.com/kurtisnelson">@kurtisnelson</a>, <a href="https://github.com/NightlyNexus">@NightlyNexus</a>, <a href="https://github.com/pyricau">@pyricau</a>, <a href="https://github.com/SalvatoreT">@SalvatoreT</a>, <a href="https://github.com/shmuelr">@shmuelr</a>, <a href="https://github.com/tokou">@tokou</a>, <a href="https://github.com/xueqiushi">@xueqiushi</a>
 for the code contributions!</p>
<p>Note: we made a 1.6 release but quickly followed up with 1.6.1 due to <a href="https://github.com/square/leakcanary/issues/1058">#1058</a>.</p>
<h3 id="public-api-changes_1">Public API changes<a class="headerlink" href="#public-api-changes_1" title="Permanent link">&para;</a></h3>
<ul>
<li>The installed ref watcher singleton is now available via <code>LeakCanary.installedRefWatcher()</code></li>
<li><code>AnalysisResult.leakTraceAsFakeException()</code> returns an exception that can be used to report and group leak traces to a tool like Bugsnag or Crashlytics.</li>
<li>New <code>InstrumentationLeakDetector</code> and <code>FailTestOnLeakRunListener</code> APIs for detecting leaks in instrumentation tests.</li>
<li>New <code>Reachability.Inspector</code> and <code>RefWatcherBuilder.stethoscopeClasses()</code> API to establish reachability and help identify leak causes.</li>
<li>Watching activities can be disabled with <code>AndroidRefWatcherBuilder.watchActivities(false)</code>, watching fragments can be disabled with <code>AndroidRefWatcherBuilder.watchFragments(false)</code></li>
<li><code>LeakCanary.setDisplayLeakActivityDirectoryProvider()</code> is deprecated and replaced with <code>LeakCanary.setLeakDirectoryProvider()</code></li>
<li>New <code>RefWatcherBuilder.computeRetainedHeapSize()</code> API to enable the computing of the retained heap size (off by default).</li>
</ul>
<p>For more details, see the <a href="https://github.com/square/leakcanary/milestone/3">1.6.1 Milestone</a> and the <a href="https://github.com/square/leakcanary/compare/v1.5.4...v1.6.1">full diff</a>.</p>
<h2 id="version-154-2017-09-22">Version 1.5.4 <em>(2017-09-22)</em><a class="headerlink" href="#version-154-2017-09-22" title="Permanent link">&para;</a></h2>
<ul>
<li>Restore Java 7 compatibility in leakcanary-watcher</li>
</ul>
<h2 id="version-153-2017-09-17">Version 1.5.3 <em>(2017-09-17)</em><a class="headerlink" href="#version-153-2017-09-17" title="Permanent link">&para;</a></h2>
<ul>
<li>Fix broken 1.5.2 <a href="https://github.com/square/leakcanary/issues/815">build</a></li>
<li>Convert leakcanary-watcher from Android library to Java library</li>
<li>Disable finish animations in RequestStoragePermissionActivity</li>
<li>Corrected README sample for Robolectric tests</li>
</ul>
<p>For more details, see the <a href="https://github.com/square/leakcanary/compare/v1.5.2...v1.5.3">full diff</a>.</p>
<h2 id="version-152-2017-08-09">Version 1.5.2 <em>(2017-08-09)</em><a class="headerlink" href="#version-152-2017-08-09" title="Permanent link">&para;</a></h2>
<ul>
<li>New excluded leaks</li>
<li>Move Leakcanary UI into leak analyzer process</li>
<li>Ignore computing retained sizes for bitmaps on O+</li>
<li>Add notification channel for persistent messages on O+</li>
<li>Exclude permission activity from recents menu</li>
<li>Updated README and sample for handling Robolectric tests</li>
</ul>
<p>For more details, see the <a href="https://github.com/square/leakcanary/compare/v1.5.1...v1.5.2">full diff</a>.</p>
<h2 id="version-151-2017-04-25">Version 1.5.1 <em>(2017-04-25)</em><a class="headerlink" href="#version-151-2017-04-25" title="Permanent link">&para;</a></h2>
<ul>
<li>New excluded leaks</li>
<li>Fix java.util.MissingFormatArgumentException in DisplayLeakService</li>
<li>Separate task affinities for different apps</li>
<li>Bump minSdk to 14</li>
<li>Fix HahaHelper for O Preview</li>
</ul>
<p>For more details, see the <a href="https://github.com/square/leakcanary/compare/v1.5...v1.5.1">full diff</a>.</p>
<h2 id="version-15-2016-09-28">Version 1.5 <em>(2016-09-28)</em><a class="headerlink" href="#version-15-2016-09-28" title="Permanent link">&para;</a></h2>
<ul>
<li>New excluded leaks</li>
<li>Added <code>LeakCanary.isInAnalyzerProcess()</code> to the no-op jar</li>
<li>Fixed several file access issues:<ul>
<li>No more cleanup on startup, we rotate the heap dump files on every new heap dump.</li>
<li>LeakCanary now falls back to the app directory until it can write to the external storage.</li>
</ul>
</li>
<li>Leak notifications now each use a distinct notification instead of erasing each other.</li>
<li>If LeakCanary can&rsquo;t perform a heap dump for any reason (e.g. analysis in progress, debugger attached), it retries later with an exponential backoff.</li>
<li>Added confirmation dialog when user deletes all leaks.</li>
<li>Replace the two LeakCanary configuration methods with a builder that provides more flexibility, see <code>LeakCanary.refWatcher()</code>.</li>
</ul>
<p>For more details, see the <a href="https://github.com/square/leakcanary/compare/v1.4...v1.5">full diff</a>.</p>
<h3 id="public-api-changes_2">Public API changes<a class="headerlink" href="#public-api-changes_2" title="Permanent link">&para;</a></h3>
<ul>
<li>New <code>HeapAnalyzer.findTrackedReferences()</code> method for headless analysis when you have no context on what leaked.</li>
<li>Added <code>LeakCanary.isInAnalyzerProcess()</code> to the no-op jar</li>
<li>Added <code>LeakCanary.refWatcher()</code> which returns an <code>AndroidRefWatcherBuilder</code> that extends <code>RefWatcherBuilder</code> and lets you fully customize the <code>RefWatcher</code> instance.</li>
<li>Removed <code>LeakCanary.install(Application, Class)</code> and <code>LeakCanary.androidWatcher(Context, HeapDump.Listener, ExcludedRefs)</code>.</li>
<li>Removed <code>R.integer.leak_canary_max_stored_leaks</code> and <code>R.integer.leak_canary_watch_delay_millis</code>, those can now be set via <code>LeakCanary.refWatcher()</code>.</li>
<li>Updated the <code>LeakDirectoryProvider</code> API to centralize all file related responsibilities.</li>
<li><code>RefWatcher</code> is now constructed with a <code>WatchExecutor</code> which executes a <code>Retryable</code>, instead of an <code>Executor</code> that executes a <code>Runnable</code>.</li>
<li><code>HeapDumper.NO_DUMP</code> was renamed <code>HeapDumper.RETRY_LATER</code></li>
</ul>
<h2 id="version-14-2016-09-11">Version 1.4 <em>(2016-09-11)</em><a class="headerlink" href="#version-14-2016-09-11" title="Permanent link">&para;</a></h2>
<ul>
<li>Fix false negative where GC root is of type android.os.Binder <a href="https://github.com/square/leakcanary/issues/482">#482</a></li>
<li>Update HAHA to 2.0.3; clear compiler warnings <a href="https://github.com/square/leakcanary/issues/563">#563</a> </li>
<li>Correct some mistakes in German translation <a href="https://github.com/square/leakcanary/pull/516">#516</a></li>
<li>Don&rsquo;t loop when storage permission denied <a href="https://github.com/square/leakcanary/issues/422">#422</a></li>
<li>Remove old references to &ldquo;__&rdquo; prefixed resources <a href="https://github.com/square/leakcanary/pull/477">#477</a></li>
<li>Fix permission crash for DisplayLeakActivity on M <a href="https://github.com/square/leakcanary/issues/382">#382</a></li>
<li>Fix NPE when thread name not found in heap dump <a href="https://github.com/square/leakcanary/issues/417">#417</a></li>
<li>Add version info to stacktrace <a href="https://github.com/square/leakcanary/issues/473">#473</a></li>
</ul>
<h2 id="version-14-beta2-2016-03-23">Version 1.4-beta2 <em>(2016-03-23)</em><a class="headerlink" href="#version-14-beta2-2016-03-23" title="Permanent link">&para;</a></h2>
<ul>
<li>Add reason for ignoring to analysis result <a href="https://github.com/square/leakcanary/issues/365">#365</a>.</li>
<li>Lower memory usage when parsing heap dumps on M <a href="https://github.com/square/leakcanary/issues/223">#223</a>.</li>
<li>Fix NPE in LeakCanaryInternals.isInServiceProcess() <a href="https://github.com/square/leakcanary/issues/449">#449</a>.</li>
<li>New ignored Android SDK leaks <a href="https://github.com/square/leakcanary/issues/297">#297</a>,<a href="https://github.com/square/leakcanary/issues/322">#322</a>.</li>
<li>Use leakcanary-android-no-op in test builds <a href="https://github.com/square/leakcanary/issues/143">#143</a>.</li>
<li>Fixes to allow LeakCanary to work with ProGuard <a href="https://github.com/square/leakcanary/pull/398">#398</a>.</li>
<li>Optimize png assets <a href="https://github.com/square/leakcanary/pull/406">#406</a>.</li>
<li>Fix delete button not working on error views <a href="https://github.com/square/leakcanary/pull/408">#408</a>.</li>
<li>Add German translation <a href="https://github.com/square/leakcanary/pull/437">#437</a>.</li>
</ul>
<h2 id="version-14-beta1-2016-01-08">Version 1.4-beta1 <em>(2016-01-08)</em><a class="headerlink" href="#version-14-beta1-2016-01-08" title="Permanent link">&para;</a></h2>
<ul>
<li>Switched to <a href="https://github.com/square/haha/blob/master/CHANGELOG.md#version-202-2015-07-20">HAHA 2.0.2</a> with uses Perflib instead of MAT under the hood <a href="https://github.com/square/leakcanary/pull/219">#219</a>. This fixes crashes and improves speed a lot.</li>
<li>We can now parse Android M heap dumps <a href="https://github.com/square/leakcanary/issues/267">#267</a>, although there are still memory issues (see <a href="https://github.com/square/leakcanary/issues/223">#223</a>).</li>
<li>Excluded leaks are now reported as well and available in the display leak activity.</li>
<li>Added ProGuard configuration for <a href="https://github.com/square/leakcanary/issues/132">#132</a>.</li>
<li>Many new ignored Android SDK leaks.</li>
<li>Added excluded leaks to text report <a href="https://github.com/square/leakcanary/issues/119">#119</a>.</li>
<li>Added LeakCanary SHA to text report <a href="https://github.com/square/leakcanary/issues/120">#120</a>.</li>
<li>Added CanaryLog API to replace the logger: <a href="https://github.com/square/leakcanary/issues/201">#201</a>.</li>
<li>Renamed all resources to begin with <code>leak_canary_</code> instead of <code>__leak_canary</code><a href="https://github.com/square/leakcanary/pull/161">#161</a></li>
<li>No crash when heap dump fails <a href="https://github.com/square/leakcanary/issues/226">#226</a>.</li>
<li>Add retained size to leak reports <a href="https://github.com/square/leakcanary/issues/162">#162</a>.</li>
</ul>
<h3 id="public-api-changes_3">Public API changes<a class="headerlink" href="#public-api-changes_3" title="Permanent link">&para;</a></h3>
<ul>
<li>AnalysisResult.failure is now a <code>Throwable</code> instead of an <code>Exception</code>. Main goal is to catch and correctly report OOMs while parsing.</li>
<li>Added ARRAY_ENTRY to LeakTraceElement.Type for references through array entries.</li>
<li>Renamed <code>ExcludedRefs</code> fields.</li>
<li>Each <code>ExcludedRef</code> entry can now be ignored entirely or &ldquo;kept only if no other path&rdquo;.</li>
<li>Added support for ignoring all fields (static and non static) for a given class.</li>
</ul>
<h2 id="version-131-2015-05-16">Version 1.3.1 <em>(2015-05-16)</em><a class="headerlink" href="#version-131-2015-05-16" title="Permanent link">&para;</a></h2>
<ul>
<li>Heap dumps and analysis results are now saved on the sd card: <a href="https://github.com/square/leakcanary/issues/21">#21</a>.</li>
<li><code>ExcludedRef</code> and <code>AndroidExcludedRefs</code> are customizable: <a href="https://github.com/square/leakcanary/issues/12">#12</a> <a href="https://github.com/square/leakcanary/issues/73">#73</a>.</li>
<li>7 new ignored Android SDK leaks: <a href="https://github.com/square/leakcanary/issues/1">#1</a> <a href="https://github.com/square/leakcanary/issues/4">#4</a> <a href="https://github.com/square/leakcanary/issues/32">#32</a> <a href="https://github.com/square/leakcanary/pull/89">#89</a> <a href="https://github.com/square/leakcanary/pull/82">#82</a> <a href="https://github.com/square/leakcanary/pull/97">#97</a>.</li>
<li>Fixed 3 crashes in LeakCanary: <a href="https://github.com/square/leakcanary/issues/37">#37</a> <a href="https://github.com/square/leakcanary/issues/46">#46</a> <a href="https://github.com/square/leakcanary/issues/66">#66</a>.</li>
<li>Fixed StrictMode thread policy violations: <a href="https://github.com/square/leakcanary/issues/15">#15</a>.</li>
<li>Updated <code>minSdkVersion</code> from <code>9</code> to <code>8</code>: <a href="https://github.com/square/leakcanary/issues/57">#57</a>.</li>
<li>Added LeakCanary version name to <code>LeakCanary.leakInfo()</code>: <a href="https://github.com/square/leakcanary/issues/49">#49</a>.</li>
<li><code>leakcanary-android-no-op</code> is lighter, it does not depend on <code>leakcanary-watcher</code> anymore, only 2 classes now: <a href="https://github.com/square/leakcanary/issues/74">#74</a>.</li>
<li>Adding field state details to the text leak trace.</li>
<li>A Toast is displayed while the heap dump is in progress to warn that the UI will freeze: <a href="https://github.com/square/leakcanary/issues/49">#20</a>. You can customize the toast by providing your own layout named <code>__leak_canary_heap_dump_toast.xml</code> (e.g. you could make it an empty layout).</li>
<li>If the analysis fails, the result and heap dump are kept so that it can be reported to LeakCanary: <a href="https://github.com/square/leakcanary/issues/102">#102</a>.</li>
<li>Update to HAHA 1.3 to fix a 2 crashes <a href="https://github.com/square/leakcanary/issues/3">#3</a> <a href="https://github.com/square/leakcanary/issues/46">46</a></li>
</ul>
<h3 id="public-api-changes_4">Public API changes<a class="headerlink" href="#public-api-changes_4" title="Permanent link">&para;</a></h3>
<ul>
<li>When upgrading from 1.3 to 1.3.1, previously saved heap dumps will not be readable any more, but they won&rsquo;t be removed from the app directory. You should probably uninstall your app.</li>
<li>Added <code>android.permission.WRITE_EXTERNAL_STORAGE</code> to <code>leakcanary-android</code> artifact.</li>
<li><code>LeakCanary.androidWatcher()</code> parameter types have changed (+ExcludedRefs).</li>
<li><code>LeakCanary.leakInfo()</code> parameter types have changed (+boolean)</li>
<li><code>ExcludedRef</code> is now serializable and immutable, instances can be created using <code>ExcludedRef.Builder</code>.</li>
<li><code>ExcludedRef</code> is available in <code>HeapDump</code></li>
<li><code>AndroidExcludedRefs</code> is an enum, you can now pick the leaks you want to ignore in <code>AndroidExcludedRefs</code> by creating an <code>EnumSet</code> and calling <code>AndroidExcludedRefs.createBuilder()</code>.</li>
<li><code>AndroidExcludedRefs.createAppDefaults()</code> &amp; <code>AndroidExcludedRefs.createAndroidDefaults()</code> return a <code>ExcludedRef.Builder</code>.</li>
<li><code>ExcludedRef</code> moved from <code>leakcanary-analyzer</code> to <code>leakcanary-watcher</code></li>
</ul>
<h2 id="version-13-2015-05-08">Version 1.3 <em>(2015-05-08)</em><a class="headerlink" href="#version-13-2015-05-08" title="Permanent link">&para;</a></h2>
<p>Initial release.</p>
<h3 id="dependencies">Dependencies<a class="headerlink" href="#dependencies" title="Permanent link">&para;</a></h3>
                
                  
                

              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../api/leakcanary-object-watcher/leakcanary/" title="Core: ObjectWatcher" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Core: ObjectWatcher
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2015 Square, Inc.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.a8b5e56f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>