



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="A memory leak detection library for Android">
      
      
      
        <meta name="author" content="Square, Inc.">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../images/logo.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.5.0">
    
    
      
        <title>FAQ - LeakCanary</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#ff7043">
      
    
    
      <script src="../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-142834539-1", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="deep-orange" data-md-color-accent="deep-purple">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#faq" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="LeakCanary" class="md-header-nav__button md-logo">
          
            <img src="../images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              LeakCanary
            </span>
            <span class="md-header-nav__topic">
              
                FAQ
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/square/leakcanary/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    LeakCanary
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href=".." class="md-tabs__link">
        Overview
      </a>
    
  </li>

      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../fundamentals/" class="md-tabs__link">
          Fundamentals
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../recipes/" class="md-tabs__link md-tabs__link--active">
          Help & Community
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../shark/" class="md-tabs__link">
          Shark
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../api/leakcanary-android-core/leakcanary/" class="md-tabs__link">
          LeakCanary API
        </a>
      
    </li>
  

      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="LeakCanary" class="md-nav__button md-logo">
      
        <img src="../images/logo.png" width="48" height="48">
      
    </a>
    LeakCanary
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/square/leakcanary/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    LeakCanary
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../getting_started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Fundamentals
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Fundamentals
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../fundamentals/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fundamentals-how-leakcanary-works/" title="How LeakCanary works" class="md-nav__link">
      How LeakCanary works
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fundamentals-fixing-a-memory-leak/" title="Fixing a memory leak" class="md-nav__link">
      Fixing a memory leak
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Help & Community
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Help & Community
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../recipes/" title="Code recipes" class="md-nav__link">
      Code recipes
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        FAQ
      </label>
    
    <a href="./" title="FAQ" class="md-nav__link md-nav__link--active">
      FAQ
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#can-a-leak-be-caused-by-the-android-sdk" class="md-nav__link">
    Can a leak be caused by the Android SDK?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-know-if-leakcanary-is-running" class="md-nav__link">
    How do I know if LeakCanary is running?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-can-i-dig-beyond-the-leak-trace" class="md-nav__link">
    How can I dig beyond the leak trace?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-does-leakcanary-get-installed-by-only-adding-a-dependency" class="md-nav__link">
    How does LeakCanary get installed by only adding a dependency?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-many-methods-does-leakcanary-add" class="md-nav__link">
    How many methods does LeakCanary add?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-use-the-snapshot-version" class="md-nav__link">
    How do I use the SNAPSHOT version?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whos-behind-leakcanary" class="md-nav__link">
    Who's behind LeakCanary?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-is-it-called-leakcanary" class="md-nav__link">
    Why is it called LeakCanary?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#who-made-the-logo" class="md-nav__link">
    Who made the logo?
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../support/" title="Support" class="md-nav__link">
      Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upgrading-to-leakcanary-2.0/" title="Upgrading to LeakCanary 2" class="md-nav__link">
      Upgrading to LeakCanary 2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../recorded-presentations/" title="Recorded Presentations" class="md-nav__link">
      Recorded Presentations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../blog-articles/" title="Blog Articles" class="md-nav__link">
      Blog Articles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://stackoverflow.com/questions/tagged/leakcanary?sort=active" title="Stack Overflow ⏏" class="md-nav__link">
      Stack Overflow ⏏
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-8" type="checkbox" id="nav-4-8">
    
    <label class="md-nav__link" for="nav-4-8">
      Contributing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-8">
        Contributing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../how_to_help/" title="How to help" class="md-nav__link">
      How to help
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../code_of_conduct/" title="Code of Conduct" class="md-nav__link">
      Code of Conduct
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dev-env/" title="Dev Environment" class="md-nav__link">
      Dev Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releasing/" title="Releasing" class="md-nav__link">
      Releasing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Shark
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Shark
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../shark/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Shark API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Shark API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../api/shark/shark/" title="Shark" class="md-nav__link">
      Shark
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/shark-android/shark/" title="Extension: Shark Android" class="md-nav__link">
      Extension: Shark Android
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/shark-graph/shark/" title="Core: Graph" class="md-nav__link">
      Core: Graph
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/shark-hprof/shark/" title="Core: Hprof" class="md-nav__link">
      Core: Hprof
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/shark-log/shark/" title="Core: Logs" class="md-nav__link">
      Core: Logs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      LeakCanary API
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        LeakCanary API
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../api/leakcanary-android-core/leakcanary/" title="LeakCanary" class="md-nav__link">
      LeakCanary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/leakcanary-object-watcher-android/leakcanary/" title="ObjectWatcher Android" class="md-nav__link">
      ObjectWatcher Android
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/leakcanary-android-instrumentation/leakcanary/" title="Extension: Instrumentation tests" class="md-nav__link">
      Extension: Instrumentation tests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/leakcanary-android-process/leakcanary/" title="Extension: Separate process" class="md-nav__link">
      Extension: Separate process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../api/leakcanary-object-watcher/leakcanary/" title="Core: ObjectWatcher" class="md-nav__link">
      Core: ObjectWatcher
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../changelog/" title="Change Log" class="md-nav__link">
      Change Log
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#can-a-leak-be-caused-by-the-android-sdk" class="md-nav__link">
    Can a leak be caused by the Android SDK?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-know-if-leakcanary-is-running" class="md-nav__link">
    How do I know if LeakCanary is running?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-can-i-dig-beyond-the-leak-trace" class="md-nav__link">
    How can I dig beyond the leak trace?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-does-leakcanary-get-installed-by-only-adding-a-dependency" class="md-nav__link">
    How does LeakCanary get installed by only adding a dependency?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-many-methods-does-leakcanary-add" class="md-nav__link">
    How many methods does LeakCanary add?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-use-the-snapshot-version" class="md-nav__link">
    How do I use the SNAPSHOT version?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whos-behind-leakcanary" class="md-nav__link">
    Who's behind LeakCanary?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-is-it-called-leakcanary" class="md-nav__link">
    Why is it called LeakCanary?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#who-made-the-logo" class="md-nav__link">
    Who made the logo?
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
				  
				<span style="float: right">🤔 Documentation issue? <a href="https://github.com/square/leakcanary/issues/new?assignees=&labels=type%3A+documentation&template=4-doc.md&title=Doc%20issue%20with%20faq/%20page">Report</a> or <a href="https://github.com/square/leakcanary/edit/master/docs/faq.md">edit</a></span>
                  
                
                
                <h1 id="faq">FAQ<a class="headerlink" href="#faq" title="Permanent link">&para;</a></h1>
<h2 id="can-a-leak-be-caused-by-the-android-sdk">Can a leak be caused by the Android SDK?<a class="headerlink" href="#can-a-leak-be-caused-by-the-android-sdk" title="Permanent link">&para;</a></h2>
<p>Yes. There are a number of known memory leaks that have been fixed over time in AOSP as well as in manufacturer implementations. When such a leak occurs, there is little you can do as an app developer to fix it. For that reason, LeakCanary has a built-in list of known Android leaks to recognize: <a href="/leakcanary/api/shark-android/shark/-android-reference-matchers/">AndroidReferenceMatchers</a>.</p>
<p>If you find a new one, please <a href="https://github.com/square/leakcanary/issues/new/choose">create an issue</a> and follow these steps:</p>
<ol>
<li>Provide the entire leak trace information (including metadata), and use backticks (`) for formatting.</li>
<li>Read the AOSP source for that version of Android, and try to figure out why it happens. You can easily navigate through SDK versions by switching branches on the GitHub mirror: <a href="https://github.com/android/platform_frameworks_base">android/platform_frameworks_base</a>.</li>
<li>Check if it happens on the latest version of Android, and otherwise use blame to find when it was fixed.</li>
<li>If it&rsquo;s still happening, build a simple repro case.</li>
<li>File an issue on <a href="http://b.android.com">b.android.com</a> with the leak trace and the repro case.</li>
<li>Create a PR in LeakCanary to update <a href="/leakcanary/api/shark-android/shark/-android-reference-matchers/">AndroidReferenceMatchers</a>. Optional: if you find a hack to clear that leak on previous versions of Android, feel free to document it.</li>
</ol>
<h2 id="how-do-i-know-if-leakcanary-is-running">How do I know if LeakCanary is running?<a class="headerlink" href="#how-do-i-know-if-leakcanary-is-running" title="Permanent link">&para;</a></h2>
<p>You can confirm that LeakCanary starts correctly by filtering on the LeakCanary tag in Logcat:</p>
<div class="codehilite"><pre><span></span>$ adb logcat | grep LeakCanary

D/LeakCanary: Installing AppWatcher
</pre></div>

<p>If you do not see <code>Installing AppWatcher</code> in the logs, check your dependencies (<code>./gradlew app:dependencies</code>) and make sure LeakCanary is there.</p>
<p>Note that LeakCanary is automatically disabled in tests (see <a href="recipes.md/#running-leakcanary-in-instrumentation-tests">Running LeakCanary in instrumentation tests</a>):</p>
<div class="codehilite"><pre><span></span>$ adb logcat | grep LeakCanary

D/LeakCanary: Installing AppWatcher
D/LeakCanary: JUnit detected in classpath, app is running tests =&gt; disabling heap dumping &amp; analysis
D/LeakCanary: Updated LeakCanary.config: Config(dumpHeap=false)
</pre></div>

<h2 id="how-can-i-dig-beyond-the-leak-trace">How can I dig beyond the leak trace?<a class="headerlink" href="#how-can-i-dig-beyond-the-leak-trace" title="Permanent link">&para;</a></h2>
<p>Sometimes the leak trace isn&rsquo;t enough and you need to dig into a heap dump with <a href="http://eclipse.org/mat/">MAT</a> or <a href="https://www.yourkit.com/">YourKit</a>.</p>
<ul>
<li>Go to a heap analysis screen, click the overflow menu and select <em>Share Heap Dump</em>.</li>
</ul>
<p>Here&rsquo;s how you can find the leaking instance in the heap dump:</p>
<ol>
<li>Look for all instances of <code>leakcanary.KeyedWeakReference</code>.</li>
<li>For each of these, look at the <code>key</code> field.</li>
<li>Find the <code>KeyedWeakReference</code> that has a <code>key</code> field equal to the reference key reported by LeakCanary.</li>
<li>The <code>referent</code> field of that <code>KeyedWeakReference</code> is your leaking object.</li>
<li>From then on, the matter is in your hands. A good start is to look at the shortest path to GC Roots (excluding weak references).</li>
</ol>
<h2 id="how-does-leakcanary-get-installed-by-only-adding-a-dependency">How does LeakCanary get installed by only adding a dependency?<a class="headerlink" href="#how-does-leakcanary-get-installed-by-only-adding-a-dependency" title="Permanent link">&para;</a></h2>
<p>On Android, content providers are created after the Application instance is created but before Application.onCreate() is called. The <code>leakcanary-object-watcher-android</code> artifact has a non exported ContentProvider defined in its <code>AndroidManifest.xml</code> file. When that ContentProvider is installed, it adds activity and fragment lifecycle listeners to the application.</p>
<h2 id="how-many-methods-does-leakcanary-add">How many methods does LeakCanary add?<a class="headerlink" href="#how-many-methods-does-leakcanary-add" title="Permanent link">&para;</a></h2>
<p><strong>0</strong>. LeakCanary is a debug only library.</p>
<h2 id="how-do-i-use-the-snapshot-version">How do I use the SNAPSHOT version?<a class="headerlink" href="#how-do-i-use-the-snapshot-version" title="Permanent link">&para;</a></h2>
<p>Update your dependencies to the latest SNAPSHOT (see <a href="https://github.com/square/leakcanary/blob/master/build.gradle">build.gradle</a>):</p>
<div class="codehilite"><pre><span></span>dependencies {
  debugImplementation &#39;com.squareup.leakcanary:leakcanary-android:2.2-SNAPSHOT&#39;
}
</pre></div>

<p>Add Sonatype&rsquo;s <code>snapshots</code> repository:</p>
<div class="codehilite"><pre><span></span>repositories {
  mavenCentral()
  maven {
    url &#39;https://oss.sonatype.org/content/repositories/snapshots/&#39;
  }
}
</pre></div>

<p>Status of the snapshot build: <a href="https://travis-ci.org/square/leakcanary"><img alt="Build Status" src="https://travis-ci.org/square/leakcanary.svg?branch=master" /></a></p>
<h2 id="whos-behind-leakcanary">Who&rsquo;s behind LeakCanary?<a class="headerlink" href="#whos-behind-leakcanary" title="Permanent link">&para;</a></h2>
<p>LeakCanary was created and open sourced by <a href="https://github.com/pyricau">@pyricau</a>, with <a href="https://github.com/square/leakcanary/graphs/contributors">many contributions</a> from the community.</p>
<h2 id="why-is-it-called-leakcanary">Why is it called LeakCanary?<a class="headerlink" href="#why-is-it-called-leakcanary" title="Permanent link">&para;</a></h2>
<p>The name <strong>LeakCanary</strong> is a reference to the expression <a href="http://en.wiktionary.org/wiki/canary_in_a_coal_mine">canary in a coal mine</a>, because LeakCanary is a sentinel used to detect risks by providing advance warning of a danger. Props to <a href="https://github.com/edenman">@edenman</a> for suggesting it!</p>
<h2 id="who-made-the-logo">Who made the logo?<a class="headerlink" href="#who-made-the-logo" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://github.com/pyricau">@pyricau</a> quickly made the <a href="https://github.com/square/leakcanary/blob/f0cc04dfbf3cca92a669f0d250034d410eb05816/assets/icon_512.png">first version</a> of the logo. It was based on cliparts from <a href="http://romannurik.github.io/AndroidAssetStudio/icons-generic.html">Android Asset Studio</a>, mixed with the selection from a photo of a Canary. The exclamation mark means danger, the shield stands for protection, and the bird, well, is a canary.</li>
<li><a href="https://github.com/romainguy">@romainguy</a> turned the ugly logo into <a href="https://github.com/square/leakcanary/pull/36">a nice vector asset</a>.</li>
<li><a href="https://github.com/flickator">@flickator</a> designed <a href="https://github.com/square/leakcanary/pull/1269">a much nicer logo</a> for LeakCanary 2.0!</li>
</ul>
<p align="center">
<img src="../images/logo-2.0.png" />
</p>
                
                  
                

              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../recipes/" title="Code recipes" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Code recipes
              </span>
            </div>
          </a>
        
        
          <a href="../support/" title="Support" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Support
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2015 Square, Inc.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.a8b5e56f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>